<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TODO App</title>
    <meta name="description" content="TODO application">
    <meta name="keywords" content="note it , do it">
    <meta name="Developer" content="Gopal N D">
    <!-- og(open graph) tags are used in social media  -->
    <meta property="og:title" content="TODO application">
    <meta property="og:description" content="TODO application">
    <meta property="og:type" content="website" />
    <!-- website refresh  -->
    <!-- <meta http-equiv="refresh" content="5" /> -->
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <form id="todoForm" class="flex flex-col gap-2 items-center justify-center mt-10">
        <input
          type="text"
          id="todoTitle"
          required
          placeholder="Enter your todo..."
          class="p-2 border rounded"
        />
        <textarea
          id="todoDescription"
          placeholder="Optional description..."
          class="p-2 border rounded"
        ></textarea>
        <input
          type="submit"
          id="submitButton"
          value="Add Todo"
          class="p-2 bg-green-500 text-white rounded cursor-pointer"
        />
      </form>
      <ul id="listTodo" class="flex flex-col gap-4 mt-4 mx-auto w-3/4"></ul>
    
    <script>
        let num =0;
        let submit = document.querySelector('#submitButton')
        let todoForm = document.querySelector('#todoForm')
        let ul = document.querySelector('#listTodo')
        let todos = []

        let isEditing = false
        let EditElement = null 

        todoForm.addEventListener('submit',(e)=>{
            e.preventDefault()
            let titleInput = document.querySelector('#todoTitle')
            let descriptionInput = document.querySelector('#todoDescription')
            let title = titleInput.value.trim()
            let description =descriptionInput.value.trim()
            if(!title || !description)return

            console.log(title, description)
            if(isEditing && EditElement){
                EditElement.querySelector('.todo-title').textContent = title;
                EditElement.querySelector('.todo-description').textContent = description
                isEditing = false;
                EditElement = null
                submit.value = 'add todo'
                document.querySelector('#todoTitle').value = ''
                document.querySelector('#todoDescription').value =''
            }else{

            
            let li = document.createElement('li')
            li.id = num
            li.dataset.value = num
            let button = document.createElement('button')
            button.innerHTML = "remove me "
            button.classList.add('text-red-400','p-2','border')
            button.addEventListener('click',(e)=>{
                e.preventDefault()
                li.remove()
            })
            let tit = document.createElement('p')
            tit.classList.add('todo-title','p-2')
            tit.innerHTML = title
            let des = document.createElement('p')
            des.classList.add('todo-description','p-2')
            des.innerHTML = description

            let edit = document.createElement('button')
            edit.classList.add('text-blue-400','border','p-2')
            edit.innerHTML = 'edit'
            edit.addEventListener('click',(e)=>{
                e.preventDefault()
                isEditing = true
                EditElement = li
                titleInput.value = tit.textContent
                descriptionInput.value = des.textContent
                submit.value = 'save'
            })
            li.appendChild(edit)
            li.appendChild(tit)
            li.appendChild(des)
            li.appendChild(button)
            document.querySelector('#todoTitle').value =''
            document.querySelector('#todoDescription').value = ''
            ul.appendChild(li)
        }
        })
    </script>
</body>
</html>